<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="indexCSS " href="test.css">

    <style>
        * {
            margin: 0;
            padding: 0;
        }

        body {
            /* background-color: gainsboro; */
        }

        /* list 영역 */
        #root {
            display: flex;

        }

        #list {
            display: flex;
            flex-direction: column;
            background-color: dimgray;
            width: 40vw;
            height: 100vh;
        }


        #result {
            margin: 10px;
            width: 50vw;
            height: 50vh;
            border: 1px solid black;
            background-color: white;
        }

        #result {
            overflow: scroll;

        }

        #menu {
            border: 1px solid black;
            display: flex;
            flex-direction: column;
            width: 25px;
            height: auto;

        }

        #m1 {
            border: 1px solid grey;
            background-color: black;
            width: 20px;
            height: 3px;
            margin: 0.5px;
        }



        /* chat 영역 */
    </style>
</head>

<body>
    <form action="/text" method="post">

        <!-- 최상위 id -->
        <div id="root">
            <!-- 왼쪽 목록 및 로그인 정보  -->
            <div id="list">
                <div id="menu">
                    <div id="m1"></div>
                    <div id="m1"></div>
                    <div id="m1"></div>
                </div>


                <!-- 메시지 title -->
                <ul id="title">
                    내용 없음
                    <!-- 사용자가 입력했던 메시지 title -->
                </ul>
                <!-- 로그인 정보 -->
                <div id="info">
                    신동현 <br>
                    <img src="" alt="프로필 사진">
                </div>
            </div>

            <!-- 메시지 영역 -->
            <div id="chatArea" name="chatArea">
                <!-- 메시지 입력 결과 -->
                <div id="result">

                </div>
                <!-- 메시지 입력 화면 -->
                <label for="chat">메시지 입력</label>
                <input id="chat" type="text" name="chat" value="메시지 입력">
                <input id="send" type="button" name="send" value="입력">
            </div>
        </div>


    </form>
    <script>
        const result = document.getElementById("result");
        const chat = document.getElementById("chat");
        const send = document.getElementById("send");

        // ...

        send.addEventListener("click", function (event) {
            if (chat.value === "") {
                alert("내용을 입력해주세요!");
                chat.focus();
            } else {
                const message = chat.value;
                const timestamp = new Date().toLocaleTimeString();
                const chatData = {
                    type: "user",
                    message: message,
                    timestamp: timestamp
                };

                // JSON 데이터를 서버로 전송
                fetch("/text", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(chatData)
                })
                    .then(response => response.json())
                    .then(data => {
                        // 서버에서 전달된 응답 처리 (필요하면)
                        console.log(data);
                    });

                const li = document.createElement("li");
                li.textContent = chat.value;
                result.appendChild(li);
                chat.value = "";
                chat.focus();
            }
        });



        // html 메시지를 표시하기위한 코드
        function appendMessage(type, message, timestamp) {
        const li = document.createElement("li");
        li.textContent = message;
        result.appendChild(li);

        console.log(message);
    }


    </script>


</body>

</html>